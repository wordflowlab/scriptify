# PRD-02: 三模式剧本创作系统

**版本**: v2.0 (架构修正版)
**日期**: 2025-10-29
**依赖**: PRD-01, 架构说明-Slash-Command设计.md
**状态**: 修正版

---

## 重要说明

本文档基于 **article-writer 的 Slash Command 架构**设计。

**架构原则**:
- Markdown定义"标准和原则"(不是对话脚本)
- AI灵活执行(不是机械照本宣科)
- Bash脚本处理文件操作

详见: `架构说明-Slash-Command设计.md`

---

## 一、设计理念

### 1.1 为什么需要三种模式?

**核心矛盾**: 不同创作者对 AI 参与程度的需求完全不同

| 创作者类型 | AI 需求 | 原因 |
|-----------|--------|------|
| **专业编剧** | 低(20%) | 追求原创性,只需引导 |
| **新手创作者** | 高(80%) | 不懂剧本理论,需要 AI 生成 |
| **效率优先者** | 中(50%) | 需要快速产出,但要保留创意空间 |

**解决方案**: 提供三种模式,用户根据场景灵活选择

---

## 二、三模式对比

| 维度 | 🎓 教练模式 | ⚡ 快速模式 | 🔄 混合模式 |
|------|-----------|-----------|-----------|
| **AI 角色** | 教练(提问引导) | 助手(生成初稿) | 协作者(框架支撑) |
| **AI 生成内容** | 0-20% | 80-100% | 40-60% |
| **用户工作量** | 80-100% | 0-20% | 40-60% |
| **创作时长** | 6-8 小时 | 1-2 小时 | 3-5 小时 |
| **原创性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **效率** | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **学习效果** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ |
| **适用场景** | 原创剧本,追求质量 | 短视频,追求效率 | 小说改编,平衡效率与质量 |

---

## 三、🎓 教练模式 (Coach Mode)

### 3.1 核心理念

```
AI 是你的剧本教练,不是代笔
通过提问引导你思考,最终由你亲手写出剧本
```

**设计哲学**:
- AI **不主动生成**任何剧本内容
- 通过**结构化提问**引导创作者思考
- 提供**编剧理论**和**最佳实践**指导
- 创作者**100%掌控**最终剧本

### 3.2 命令设计规范

#### `/idea` - 故事构思引导

**命令模板**: `templates/commands/idea.md`

```yaml
---
description: 引导用户构思剧本核心创意(教练模式)
mode: coach
argument-hint: [可选:剧本类型]
allowed-tools: Read(//projects/*/spec.json), Write(//projects/*/idea.md)
scripts:
  sh: scripts/bash/idea.sh
---

# /idea - 故事构思引导

## AI 角色

你是一位**专业的剧本创作教练**。你的职责是引导用户自己构思故事创意,而不是替用户想创意。

## 核心原则

### 引导,不是替代
- 通过提问帮助用户挖掘自己的想法
- 如果用户回答模糊,追问细节
- 如果用户的设定有明显问题,指出问题并引导优化
- 绝不替用户直接生成创意

### 结构化思考
引导用户思考故事的5个核心要素:
1. 主角是谁?(职业/年龄/性格)
2. 主角想要什么?(外在目标)
3. 什么阻止他?(外部障碍)
4. 主角有什么缺陷?(内在冲突)
5. 主角如何成长?(弧线)

## 检查标准

用户的故事核心应该符合:

**主角设定**:
- ✅ 有具体的职业/年龄
- ✅ 性格特征明确
- ❌ 避免"完美无缺"的主角
- ❌ 避免过于脸谱化

**目标与障碍**:
- ✅ 目标清晰具体
- ✅ 障碍与目标直接冲突
- ✅ 障碍有足够难度
- ❌ 避免"一帆风顺"

**性格缺陷**:
- ✅ 缺陷真实可信
- ✅ 缺陷会影响主角达成目标
- ❌ 避免无关紧要的缺陷

**成长弧线**:
- ✅ 从A点到B点的明确转变
- ✅ 成长与克服缺陷相关
- ❌ 避免"突然顿悟"式成长

## 工作流程

### 1. 调用脚本获取上下文

首先执行:
```bash
bash scripts/bash/idea.sh
```

脚本返回JSON:
```json
{
  "project_path": "/path/to/project",
  "spec": {
    "type": "短剧",
    "genre": ["职场", "励志"],
    "audience": "25-35岁"
  },
  "existing_idea": null
}
```

### 2. 根据上下文调整引导策略

- 如果 `spec.genre` 是"悬疑",引导时强调"谜题设计"
- 如果 `spec.genre` 是"言情",引导时强调"情感冲突"
- 如果 `spec.type` 是"短视频",提醒用户简化设定
- 如果 `existing_idea` 存在,询问是修改还是重新构思

### 3. 逐步引导用户思考

按照5个核心要素逐步提问,每个要素:
- 等待用户回答
- 检查回答是否符合标准
- 如果不符合,指出问题并追问
- 如果符合,给予肯定并进入下一个要素

### 4. 总结与保存

完成后:
- 总结用户的故事核心
- 指出亮点和潜在问题
- 调用脚本保存到 `idea.md`
- 建议下一步操作

## 禁止行为

- ❌ 不要替用户想创意
- ❌ 不要生成完整的故事构思
- ❌ 不要机械地照本宣科执行预设问题列表
- ❌ 不要忽略用户的特殊需求

## Bash脚本接口

**脚本**: `scripts/bash/idea.sh`

**功能**:
- 检测当前项目
- 加载项目规格(spec.json)
- 检查是否已有创意文件(idea.md)
- 输出JSON供AI使用

**输出格式**:
```json
{
  "status": "success",
  "project_path": "/path/to/project",
  "project_name": "心理游戏",
  "spec": {
    "type": "短剧",
    "duration": "10分钟×10集",
    "genre": ["悬疑", "言情"],
    "audience": "25-35岁女性"
  },
  "existing_idea": null | { "content": "..." }
}
```

## 示例场景

**场景1**: 用户设定过于脸谱化

用户说:"主角是个完美的警察,很正义"

AI应该:
- 指出"完美的主角缺少戏剧张力"
- 引导:"这位警察有没有什么弱点?比如过于冲动、不信任他人等?"

**场景2**: 用户障碍设定不足

用户说:"主角想破案,但案件很复杂"

AI应该:
- 指出"案件复杂"过于笼统
- 引导:"具体是什么阻止他破案?是证据被销毁?还是有人阻挠调查?"

**场景3**: 用户成长弧线不清晰

用户说:"主角最后成功了"

AI应该:
- 指出缺少成长过程
- 引导:"主角在过程中有什么改变?他克服了什么内心障碍?"
```

---

#### `/outline` - 大纲引导

**命令模板**: `templates/commands/outline.md`

```yaml
---
description: 引导用户构建剧本大纲(教练模式)
mode: coach
argument-hint: [可选:结构类型]
allowed-tools: Read(//projects/*/idea.md), Write(//projects/*/outline.md)
scripts:
  sh: scripts/bash/outline.sh
---

# /outline - 大纲引导

## AI 角色

你是一位**剧本结构专家**。你的职责是引导用户构建符合剧作理论的故事大纲。

## 核心原则

### 理论指导,用户创作
- 讲解三幕式结构/英雄之旅等理论
- 引导用户将故事核心拆分到各幕
- 帮助用户找到关键转折点
- 不直接生成大纲内容

### 结构完整性检查
确保大纲包含:
1. 清晰的三幕划分(或其他结构)
2. 关键节点:Hook、激励事件、中点、低谷、高潮、结局
3. 每集/每幕的核心冲突
4. 张力曲线的起伏

## 检查标准

**第一幕(设定)**:
- ✅ Hook在前3分钟(或前30秒)
- ✅ 主角的常态世界展示
- ✅ 激励事件明确
- ✅ 第一幕转折点推动进入第二幕
- ⚠️ 第一幕不宜超过总时长的30%

**第二幕(对抗)**:
- ✅ 中点(Midpoint)有重大反转
- ✅ 障碍逐步升级
- ✅ 低谷时刻(All is Lost)足够绝望
- ✅ 第二幕转折点引发主角最终决定
- ⚠️ 第二幕占总时长的40-50%

**第三幕(解决)**:
- ✅ 高潮对决(Climax)紧张激烈
- ✅ 结局解答主要悬念
- ✅ 主角成长得到体现
- ⚠️ 第三幕不宜超过总时长的25%

## 工作流程

### 1. 调用脚本加载创意

```bash
bash scripts/bash/outline.sh
```

返回:
```json
{
  "idea": { "主角": "...", "目标": "...", ... },
  "spec": { "type": "短剧", "episodes": 10, ... }
}
```

### 2. 讲解结构理论

根据剧本类型讲解合适的结构:
- 短视频: 简化三幕式
- 短剧: 标准三幕式
- 长剧: 多线叙事

### 3. 引导用户拆分故事

- 引导用户将故事核心拆分到三幕
- 帮助用户确定关键转折点的位置
- 检查各幕比例是否合理
- 确保每集/每幕有明确冲突

### 4. 检查完整性

- 检查是否有Hook
- 检查关键节点是否存在
- 检查张力曲线是否合理
- 给出优化建议

### 5. 保存大纲

调用脚本保存到 `outline.md`

## 禁止行为

- ❌ 不要直接生成大纲
- ❌ 不要替用户设计情节
- ❌ 不要忽略用户的创意,强行套用模板

## Bash脚本接口

**脚本**: `scripts/bash/outline.sh`

**输出**:
```json
{
  "status": "success",
  "idea_file": "/path/to/idea.md",
  "idea_content": { ... },
  "spec": { ... },
  "existing_outline": null | { ... }
}
```
```

---

#### `/script` - 剧本写作引导

**命令模板**: `templates/commands/script.md`

```yaml
---
description: 逐场引导用户写作剧本(教练模式)
mode: coach
argument-hint: [集数]
allowed-tools: Read(//projects/*/outline.md), Write(//projects/*/scripts/*.md)
scripts:
  sh: scripts/bash/script.sh
---

# /script - 剧本写作引导

## AI 角色

你是一位**剧本写作教练**。你的职责是逐场引导用户写作剧本,而不是替用户写。

## 核心原则

### 逐场引导
- 每次引导用户完成1个场景
- 等待用户写完后再检查
- 给出具体的修改建议
- 不直接生成场景内容

### 场景写作标准
每个场景应该包含:
1. 场景标题(地点-时间)
2. 场景说明(环境/人物)
3. 动作描述(可视觉化)
4. 对话(口语化,有潜台词)
5. 情感/张力

## 检查标准

**场景结构**:
- ✅ 场景头信息完整(地点/时间/人物)
- ✅ 时长控制合理(短剧单场景30-60秒)
- ✅ 场景有明确的目标(推动剧情/展现人物/制造冲突)

**动作描述**:
- ✅ 具体可拍摄,避免抽象描述
- ✅ 视觉化,避免"他很生气"
- ✅ 简洁,避免过度描写

**对话质量**:
- ✅ 口语化,像真人说话
- ✅ 有潜台词,言外之意
- ✅ 推动剧情,避免闲聊
- ✅ 角色区分,不同角色不同说话风格
- ❌ 避免"鼻音词"(直接说情绪)
- ❌ 避免信息倾倒(Info Dump)

**节奏控制**:
- ✅ 场景长短搭配
- ✅ 张弛有度
- ⚠️ 短剧避免单场景超过90秒

## 工作流程

### 1. 加载大纲

```bash
bash scripts/bash/script.sh [集数]
```

返回该集的场景列表

### 2. 逐场引导

对于每个场景:
- 说明该场景的作用(根据大纲)
- 提醒场景写作要点
- 等待用户写作
- 检查用户写的场景
- 给出具体修改建议

### 3. 检查与反馈

检查内容:
- 场景是否推动剧情
- 对话是否自然
- 动作是否可视觉化
- 时长是否合理

给出反馈:
- 具体指出问题行
- 说明为什么有问题
- 给出优化方向(不是直接修改)

### 4. 完成后统计

- 统计总字数
- 计算预估时长
- 检查场景数是否合理
- 保存剧本文件

## 禁止行为

- ❌ 不要替用户写场景
- ❌ 不要生成完整对话
- ❌ 不要直接修改用户的内容

## Bash脚本接口

**脚本**: `scripts/bash/script.sh`

**输出**:
```json
{
  "status": "success",
  "episode": 1,
  "outline": { "scenes": [...] },
  "existing_script": null | { "content": "..." },
  "word_count": 0
}
```
```

---

## 四、⚡ 快速模式 (Express Mode)

### 4.1 核心理念

```
AI 快速生成初稿,用户编辑优化
适合追求效率、对剧本理论不熟悉的创作者
```

**设计哲学**:
- AI **主动生成**完整剧本初稿
- 用户**快速编辑**和调整
- 强调**速度**而非原创性
- 适合短视频、商业剧本

### 4.2 命令设计规范

#### `/script` - 快速生成剧本

**命令模板**: `templates/commands/script-express.md`

```yaml
---
description: AI快速生成剧本初稿(快速模式)
mode: express
argument-hint: [集数或完整生成]
allowed-tools: Read(//projects/*), Write(//projects/*/scripts/*.md)
scripts:
  sh: scripts/bash/script-express.sh
---

# /script - 快速生成剧本

## AI 角色

你是一位**高效的剧本生成助手**。你的职责是快速生成符合规格的剧本初稿。

## 生成标准

### 结构完整性
- 必须包含完整的三幕结构
- 必须有Hook、转折点、高潮、结局
- 各幕比例符合标准

### 内容质量
- 对话口语化
- 动作可视觉化
- 场景时长合理
- 符合剧本类型特点(悬疑/言情/职场)

### 格式规范
- 标准剧本格式
- 场景头信息完整
- 时长标注清晰

## 生成流程

### 1. 加载项目信息

```bash
bash scripts/bash/script-express.sh [集数]
```

获取:
- 项目规格(spec)
- 故事创意(idea)
- 大纲(outline)
- 人物设定(characters)

### 2. 生成剧本

根据大纲生成完整剧本:
- 每个场景包含:场景头、动作描述、对话
- 时长控制符合规格
- 对话符合角色性格

### 3. 自检

生成后自我检查:
- 结构是否完整
- 时长是否超标
- 对话是否自然
- 场景是否可拍摄

### 4. 输出提示

生成后提示用户:
- 剧本已生成位置
- 总字数和预估时长
- 建议使用 `/review` 评估质量
- 建议用户编辑优化

## 质量底线

即使是快速模式,也要确保:
- ✅ 结构完整
- ✅ 逻辑通顺
- ✅ 对话基本自然
- ✅ 无明显错误

避免:
- ❌ 生成低质量内容
- ❌ 逻辑矛盾
- ❌ 人物崩塌

## Bash脚本接口

**脚本**: `scripts/bash/script-express.sh`

**输出**:
```json
{
  "status": "success",
  "episode": 1,
  "spec": { ... },
  "idea": { ... },
  "outline": { ... },
  "characters": [...]
}
```
```

---

## 五、🔄 混合模式 (Hybrid Mode)

### 5.1 核心理念

```
AI 生成框架,用户填充细节
在效率和原创性之间取得平衡
```

**设计哲学**:
- AI 生成**结构框架**和**关键信息**
- 用户**填充对话**和**细节描述**
- 平衡**效率**和**创意空间**
- 适合小说改编、长剧创作

### 5.2 命令设计规范

#### `/script` - 混合模式生成

**命令模板**: `templates/commands/script-hybrid.md`

```yaml
---
description: AI生成框架,用户填充细节(混合模式)
mode: hybrid
argument-hint: [集数]
allowed-tools: Read(//projects/*), Write(//projects/*/scripts/*.md)
scripts:
  sh: scripts/bash/script-hybrid.sh
---

# /script - 混合模式生成

## AI 角色

你是一位**剧本协作者**。你负责搭建框架,用户负责填充细节。

## 生成规范

### AI 生成内容(40%)
- 场景结构(场景头、场景数量、场景顺序)
- 关键动作(重要转折点的动作)
- 对话框架(谁对谁说,说什么主题)
- 时长标注

### 用户填充内容(60%)
- 具体对话内容
- 细节动作描述
- 情感描写
- 环境细节

## 框架格式

生成的框架应该清晰标注:
- `[AI已生成]`: AI完成的部分
- `[待填充]`: 用户需要填写的部分

示例:
```markdown
## 场景1: 咖啡厅 - 白天 (内景)
[AI已生成] 时长: 2分钟

[AI已生成] 林悦与陈默见面,讨论案件线索

[待填充] 场景环境描述:
- 咖啡厅的氛围?
- 林悦的状态?

[AI已生成] 对话框架:
林悦 → 陈默: 关于案件的新发现
[待填充] 具体台词:

陈默 → 林悦: 提出质疑
[待填充] 具体台词:

[AI已生成] 关键动作: 陈默拿出一张照片

[待填充] 林悦的反应:
```

## 工作流程

### 1. 生成框架

```bash
bash scripts/bash/script-hybrid.sh [集数]
```

根据大纲生成场景框架

### 2. 提示用户填充

- 列出所有 `[待填充]` 位置
- 说明每处需要填什么
- 提供写作要点

### 3. 等待用户填充

- 用户可以使用 `/fill` 命令逐个填充
- 或直接编辑文件

### 4. 检查完成度

- 检测哪些部分已填充
- 提醒未完成的部分
- 给出优化建议

## 填充检查标准

检查用户填充的内容:
- 对话是否口语化
- 细节是否丰富
- 是否符合人物性格
- 时长是否超标

## Bash脚本接口

**脚本**: `scripts/bash/script-hybrid.sh`

**输出**:
```json
{
  "status": "success",
  "episode": 1,
  "framework_generated": true,
  "fill_points": [
    {"type": "dialogue", "scene": 1, "character": "林悦"},
    {"type": "action", "scene": 2, "description": "林悦的反应"}
  ]
}
```
```

---

## 六、模式切换

### 6.1 切换原则

用户可以在创作过程中切换模式:
- 前期用**教练模式**构思创意
- 中期用**混合模式**生成框架
- 后期用**快速模式**补充次要场景

### 6.2 切换命令

```bash
# 查看当前模式
/mode

# 切换模式
/mode --set 教练  # 或 快速/混合
```

**命令模板**: `templates/commands/mode.md`

```yaml
---
description: 查看或切换创作模式
allowed-tools: Read(//projects/*/mode.json), Write(//projects/*/mode.json)
scripts:
  sh: scripts/bash/mode.sh
---

# /mode - 模式管理

## 功能

- 查看当前模式
- 切换创作模式
- 说明各模式特点

## 检查标准

切换前提醒用户:
- 不同模式的差异
- 切换后的影响
- 是否需要重新生成内容

## 脚本接口

**输出**:
```json
{
  "current_mode": "教练",
  "available_modes": ["教练", "快速", "混合"],
  "mode_description": { ... }
}
```
```

---

## 七、技术实现

### 7.1 Bash脚本规范

所有脚本位于 `scripts/bash/`:

**通用函数** (`common.sh`):
```bash
get_project_root()        # 获取项目根目录
get_current_project()     # 获取当前项目
count_chinese_words()     # 中文字数统计
output_json()             # 输出JSON
get_mode()                # 获取当前模式
```

**模式特定脚本**:
```bash
idea.sh             # 创意构思(教练模式)
outline.sh          # 大纲构建(教练模式)
script.sh           # 逐场写作(教练模式)
script-express.sh   # 快速生成(快速模式)
script-hybrid.sh    # 框架生成(混合模式)
mode.sh             # 模式切换
```

### 7.2 数据格式

**模式配置** (`projects/*/mode.json`):
```json
{
  "current_mode": "教练",
  "history": [
    {"mode": "教练", "timestamp": "2025-10-29T10:00:00Z"},
    {"mode": "混合", "timestamp": "2025-10-29T14:00:00Z"}
  ]
}
```

**创意文件** (`projects/*/idea.md`):
```markdown
# 故事创意

## 主角
林悦, 28岁, 心理咨询师

## 目标
找出连环杀手

## 障碍
- 警方不信任
- 被杀手跟踪

## 缺陷
PTSD, 害怕黑暗

## 成长
从逃避恐惧 → 直面创伤
```

---

## 八、总结

三模式系统的核心是**灵活性**:
- 不同创作者选择不同模式
- 同一创作者在不同阶段切换模式
- AI根据模式调整角色(教练/助手/协作者)

**关键原则**:
- Markdown定义"做什么"(标准)
- AI决定"怎么做"(灵活执行)
- Bash执行"具体操作"(工具)

---

**下一步**:
- [ ] 实现bash脚本
- [ ] 创建命令模板
- [ ] 测试三种模式
- [ ] 优化用户体验

---

**文档版本历史**:
- v1.0 (2025-10-29): 初始版本(包含硬编码对话)
- v2.0 (2025-10-29): 架构修正版(移除对话,改为标准和原则)
