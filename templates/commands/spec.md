---
description: 定义剧本规格(类型/时长/题材/受众/平台)
scripts:
  sh: ../../scripts/bash/spec.sh
  ps1: ../../scripts/powershell/spec.ps1
---

# /spec - 剧本规格定义系统 📋

> **核心理念**: 引导用户逐步明确剧本的核心规格
> **目标**: 完成 spec.json 的填写,为后续创作奠定基础

---

## 第一步: 运行脚本获取状态 ⚠️ 必须执行

### 执行检查

```bash
# AI 操作: 运行脚本
bash scripts/bash/spec.sh
# 或
pwsh scripts/powershell/spec.ps1
```

### 解析返回结果

脚本会返回 JSON 格式的状态:

- **如果 `action === "update"`**: 已有配置,引导用户更新
- **如果 `action === "create"`**: 首次创建,引导用户填写

---

## 第二步: 确认剧本类型 ⚠️ 必须执行

### 检查 `type` 字段

从第一步返回的 JSON 中检查 `existing_config.type` (如果是 update) 或脚本创建的初始模板中的 `type` 字段。

#### 情况 A: 如果 `type` 字段**不为空**(如: "短剧")

说明用户在初始化时已经选择过类型,**不要重新让用户选择**!

**展示确认界面**:

```
╔══════════════════════════════════════════════════════════╗
║                   确认剧本类型                              ║
╚══════════════════════════════════════════════════════════╝

📋 项目: [项目名称]

在初始化时,你已经选择了剧本类型: 【[type 值]】

请确认:
  1. ✅ 继续使用 "[type 值]"
  2. 🔄 重新选择类型

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 1 或 2:
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**,不要自动进入下一步。

#### 情况 B: 如果 `type` 字段**为空**

说明需要让用户选择类型。

**展示选择界面**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择剧本类型                              ║
╚══════════════════════════════════════════════════════════╝

📋 项目: [项目名称]

请选择剧本类型:

  1. 📱 短剧 - 竖屏短剧,适合抖音/快手
     时长: 通常 1-2 分钟/集,20-100 集
     特点: 爽点密集,反转频繁

  2. 🎬 短视频 - 单集完整故事
     时长: 通常 3-15 分钟
     特点: 完整叙事,适合 B站/YouTube

  3. 📺 长剧 - 传统电视剧/网剧
     时长: 通常 40-50 分钟/集,20-60 集
     特点: 完整世界观,深度人物刻画

  4. 🎞️ 电影 - 院线/网络电影
     时长: 通常 90-120 分钟
     特点: 完整三幕结构,高制作价值

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 1 / 2 / 3 / 4 选择类型:
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**,不要自动进入下一步。

### 处理用户输入

- **如果用户选择 1**: type = "短剧"
- **如果用户选择 2**: type = "短视频"
- **如果用户选择 3**: type = "长剧"
- **如果用户选择 4**: type = "电影"
- **如果是确认场景选择 2**: 跳回选择界面

确认选择:

```
✅ 剧本类型已确定: [type 值]

继续下一步...
```

---

## 第三步: 确定时长和集数 ⚠️ 必须执行

根据剧本类型,引导用户填写 `duration` 和 `episodes`。

### 如果是"短剧"

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏱️  时长规划

短剧通常采用以下规格:
  • 超短剧: 1-2 分钟/集 × 60-100 集
  • 短剧: 2-3 分钟/集 × 30-50 集
  • 中短剧: 3-5 分钟/集 × 20-30 集

请告诉我:
1. 每集时长(分钟):
2. 总集数:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入两个数值**。

收到答案后,记录:
- `duration`: "[每集时长]分钟×[总集数]集" (如: "2分钟×50集")
- `episodes`: [总集数的数字] (如: 50)

### 如果是"短视频"

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏱️  时长规划

短视频通常时长:
  • 3-5 分钟: 轻量故事
  • 5-10 分钟: 完整叙事
  • 10-15 分钟: 深度内容

请告诉我目标时长(分钟):

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

收到答案后,记录:
- `duration`: "[时长]分钟" (如: "8分钟")
- `episodes`: 1

### 如果是"长剧"

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏱️  时长规划

长剧通常规格:
  • 网剧: 30-40 分钟/集 × 12-24 集
  • 卫视剧: 45-50 分钟/集 × 30-60 集

请告诉我:
1. 每集时长(分钟):
2. 总集数:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

收到答案后,记录:
- `duration`: "[每集时长]分钟×[总集数]集"
- `episodes`: [总集数]

### 如果是"电影"

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏱️  时长规划

电影通常时长:
  • 短片: 30-60 分钟
  • 标准: 90-120 分钟
  • 长片: 120-180 分钟

请告诉我目标时长(分钟):

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

收到答案后,记录:
- `duration`: "[时长]分钟"
- `episodes`: 1

---

## 第四步: 确定题材类型 ⚠️ 必须执行

**展示题材选择界面**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择题材类型                              ║
╚══════════════════════════════════════════════════════════╝

常见题材:

  📖 剧情类:
    1. 都市情感 - 现代爱情/婚姻/家庭
    2. 职场商战 - 创业/商业竞争
    3. 悬疑推理 - 烧脑/探案/反转
    4. 青春校园 - 学生时代/成长

  🎭 类型片:
    5. 古装历史 - 朝堂/宫斗/武侠
    6. 奇幻玄幻 - 修仙/穿越/异世界
    7. 科幻未来 - 科技/末日/太空
    8. 喜剧搞笑 - 轻松/幽默/讽刺

  🎬 特殊类型:
    9. 励志成长 - 逆袭/奋斗
   10. 惊悚恐怖 - 灵异/心理恐怖
   11. 其他 (自己输入)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (1-11):
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

### 处理用户输入

- 如果选择 1-10: 使用对应题材名称
- 如果选择 11: **继续等待**用户输入自定义题材

记录到 `genre` 字段。

确认:

```
✅ 题材已确定: [genre 值]
```

---

## 第五步: 确定目标受众 ⚠️ 必须执行

**提问**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👥 目标受众

请告诉我主要受众的:

1. 年龄段 (选择):
   a. 18-25 岁 (Z世代)
   b. 25-35 岁 (年轻白领)
   c. 35-50 岁 (中年人群)
   d. 全年龄

2. 性别倾向 (选择):
   a. 女性向
   b. 男性向
   c. 中性/全性别

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入 (如: "a, b" 或 "1a, 2c"):
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

### 处理用户输入

根据用户选择,记录到 `audience` 对象:

```json
{
  "age": "18-25岁" / "25-35岁" / "35-50岁" / "全年龄",
  "gender": "女性向" / "男性向" / "中性"
}
```

确认:

```
✅ 目标受众: [age], [gender]
```

---

## 第六步: 确定目标平台 ⚠️ 必须执行

根据剧本类型,推荐合适的平台。

### 如果是"短剧"或"短视频"

**展示平台选择**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择目标平台                              ║
╚══════════════════════════════════════════════════════════╝

短剧/短视频适合的平台 (可多选):

  📱 短视频平台:
    1. 抖音 - 最大流量,竖屏为主
    2. 快手 - 下沉市场,真实感强
    3. 视频号 - 微信生态,中老年用户

  🎬 中视频平台:
    4. B站 - 年轻用户,高质量要求
    5. YouTube - 国际化,长尾流量
    6. 小红书 - 女性用户,种草属性

  📺 长视频平台:
    7. 爱奇艺/腾讯/优酷 - 付费会员制

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (可多选,用逗号分隔,如: "1,2,4"):
```

### 如果是"长剧"或"电影"

**展示平台选择**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择目标平台                              ║
╚══════════════════════════════════════════════════════════╝

长剧/电影适合的平台 (可多选):

  📺 主流长视频:
    1. 爱奇艺 - 主流网剧,付费会员
    2. 腾讯视频 - IP改编,综合平台
    3. 优酷 - 阿里生态

  🎬 新兴平台:
    4. 芒果TV - 卫视联动
    5. Netflix - 国际化
    6. B站 - 年轻化,番剧强

  🎭 院线/其他:
    7. 院线发行
    8. 其他平台

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (可多选,用逗号分隔,如: "1,2"):
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

### 处理用户输入

将用户选择的平台转换为数组,记录到 `target_platform`:

```json
{
  "target_platform": ["抖音", "快手"]
}
```

确认:

```
✅ 目标平台: [平台1], [平台2], ...
```

---

## 第七步: 确定整体风格基调 ⚠️ 必须执行

**展示风格选择**:

```
╔══════════════════════════════════════════════════════════╗
║                   选择风格基调                              ║
╚══════════════════════════════════════════════════════════╝

请选择整体风格:

  1. 😄 轻松幽默 - 喜剧/搞笑/治愈
  2. 😢 感人温馨 - 催泪/温情/励志
  3. 😱 紧张刺激 - 悬疑/惊悚/烧脑
  4. 💪 热血燃爽 - 爽文/复仇/逆袭
  5. 💕 浪漫唯美 - 爱情/梦幻/文艺
  6. 🎭 严肃深刻 - 现实/批判/思考
  7. 🌈 混合风格 (自己描述)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

请输入编号 (1-7):
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户输入**。

### 处理用户输入

- 如果选择 1-6: 使用对应风格描述
- 如果选择 7: **继续等待**用户输入自定义风格描述

记录到 `tone` 字段。

确认:

```
✅ 风格基调: [tone 值]
```

---

## 第八步: 汇总确认并保存 ⚠️ 必须执行

**展示完整配置汇总**:

```
╔══════════════════════════════════════════════════════════╗
║                   规格配置汇总                              ║
╚══════════════════════════════════════════════════════════╝

📋 项目名称: [project_name]

📌 基本信息:
  • 类型: [type]
  • 时长: [duration]
  • 集数: [episodes]

🎭 内容定位:
  • 题材: [genre]
  • 受众: [audience.age], [audience.gender]
  • 风格: [tone]

📺 发布平台:
  • [platform1]
  • [platform2]
  • ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

确认以上信息无误?

  1. ✅ 确认保存
  2. 🔄 修改某项

请输入 1 或 2:
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户确认**。

### 处理用户确认

#### 如果用户选择"1 确认保存"

**执行保存操作**:

```bash
# AI 操作: 使用 Write 工具更新 spec.json
Write spec.json
```

写入完整的 JSON 配置:

```json
{
  "project_name": "[项目名称]",
  "type": "[type]",
  "duration": "[duration]",
  "episodes": [episodes],
  "genre": "[genre]",
  "audience": {
    "age": "[age]",
    "gender": "[gender]"
  },
  "target_platform": ["平台1", "平台2"],
  "tone": "[tone]",
  "created_at": "[时间戳]",
  "updated_at": "[当前时间戳]"
}
```

**显示成功消息**:

```
✅ 规格配置已保存!

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📁 配置文件: spec.json

💡 下一步建议:

  1. /idea - 进行创意构思和选题
  2. /outline - 设计剧本大纲和结构

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**任务完成** ✅

#### 如果用户选择"2 修改某项"

**提问**:

```
请告诉我要修改哪一项:
  • type (类型)
  • duration (时长)
  • genre (题材)
  • audience (受众)
  • platform (平台)
  • tone (风格)

输入项目名称:
```

**⚠️ 强制等待机制**:
AI **必须停在这里,等待用户指定要修改的项**。

收到用户指定后,跳回对应的步骤重新询问。

---

## 重要提醒 ⚠️

### 等待机制

本流程中有**8个强制等待点**,AI 必须在每个等待点停下来,等待用户输入,**绝对不能**:
- ❌ 自动假设用户的选择
- ❌ 替用户做决定
- ❌ 一次性问完所有问题
- ❌ 跳过任何步骤

### 执行原则

✅ **必须做**:
- 严格按照步骤顺序执行
- 每次只问一个问题
- 等待用户回答后再继续
- 确认用户的每个输入

❌ **绝对不能**:
- 跳过脚本执行
- 假设或猜测用户的答案
- 一次性展示所有问题
- 不等待就进入下一步

### 角色定位

你是**剧本规格顾问**,你的职责是:
- 📋 引导用户完整填写规格
- 💡 提供专业的建议和说明
- ✅ 确保每个字段都准确填写
- 🚫 不替用户做决定,只提供选项

---

**开始执行第一步** ⬇️
